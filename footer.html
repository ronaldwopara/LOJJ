<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOJJ.IO Footer Design</title>
    <!-- Loading Inter font for that clean, modernist look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --accent-color: #e8fc03; /* The yellow tag color */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
        }

        /* Simulating page content so you can scroll down to footer */
        .page-content {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f4f4f4;
            color: #ccc;
            font-size: 2rem;
            font-weight: 800;
            text-transform: uppercase;
        }

        /* --- Footer Styles --- */
        .site-footer {
            background-color: #fff;
            padding: 60px 40px 20px 40px;
            border-top: 1px solid #000;
            position: relative;
        }

        .footer-top {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 60px;
        }

        /* Left Section: Join Movement */
        .footer-cta {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
        }

        h2 {
            font-size: 2.5rem;
            line-height: 1;
            font-weight: 800;
            margin: 0 0 30px 0;
            text-transform: uppercase;
            letter-spacing: -0.02em;
        }

        .newsletter-form {
            position: relative;
            margin-bottom: 25px;
            border-bottom: 2px solid #000;
        }

        .newsletter-input {
            width: 100%;
            border: none;
            outline: none;
            padding: 10px 0;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            text-transform: uppercase;
            background: transparent;
        }

        .newsletter-input::placeholder {
            color: #000;
        }

        .newsletter-btn {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-weight: 800;
            cursor: pointer;
            text-transform: uppercase;
        }

        .shipping-tag {
            display: inline-block;
            background-color: var(--accent-color);
            padding: 5px 10px;
            font-weight: 700;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        /* Right Section: Links */
        .footer-links {
            display: flex;
            gap: 60px;
            text-align: right;
        }

        .link-column {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .link-column h4 {
            margin: 0 0 10px 0;
            font-size: 0.85rem;
            text-transform: uppercase;
            color: #666;
            font-weight: 600;
        }

        .link-column a {
            text-decoration: none;
            color: #000;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .link-column a:hover {
            text-decoration: underline;
        }

        /* Middle Section: The 3D Object Container */
        #canvas-container {
            width: calc(100% + 80px); /* Break out of parent padding */
            margin-left: -40px;       /* Offset left padding */
            height: 350px;
            position: relative;
            margin-top: 20px;
            margin-bottom: 20px;
            overflow: hidden; /* Ensure no horizontal scrollbars if we go super wide */
            /* No background color - canvas is transparent */
        }

        /* Loading Overlay inside the canvas container */
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #3f841c;
            font-weight: bold;
            pointer-events: none;
        }

        /* Bottom Section: Legal */
        .footer-bottom {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .footer-top {
                flex-direction: column;
            }
            .footer-links {
                justify-content: space-between;
                text-align: left;
                width: 100%;
            }
            #canvas-container {
                height: 250px; /* Smaller on mobile */
            }
        }
    </style>
</head>
<body>

    <div class="page-content">
        Scroll Down
    </div>

    <footer class="site-footer">
        <div class="footer-top">
            <!-- CTA Section -->
            <div class="footer-cta">
                <h2>Join the<br>Superfluid<br>Movement</h2>
                
                <form class="newsletter-form" onsubmit="event.preventDefault();">
                    <input type="email" class="newsletter-input" placeholder="Email">
                    <button class="newsletter-btn">OK</button>
                </form>

                <div class="shipping-tag">
                    • Free Standard Shipping
                </div>
            </div>

            <!-- Links Section -->
            <div class="footer-links">
                <div class="link-column">
                    <h2>About</h2>
                </div>
                <div class="link-column">
                    <h2>Features</h2>
                </div>
            </div>
        </div>

        <!-- THE 3D LOGO -->
        <div id="canvas-container">
            <div id="loading">Loading 3D Asset...</div>
        </div>

        <div class="footer-bottom">
            <div class="copyright">
                © 2026 LOJJ.IO - All Rights Reserved
            </div>
        </div>
    </footer>

    <!-- Three.js Logic -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { SVGLoader } from 'three/addons/loaders/SVGLoader.js';
        import { RectAreaLightUniformsLib } from 'three/addons/lights/RectAreaLightUniformsLib.js';

        // --- Configuration ---
        const config = {
            // Material (Green Metal Settings)
            colorHex: 0x3f841c,
            emissive: 0x020f00, 
            roughness: 0.25,
            metalness: 0.85,
            clearcoat: 1.0,
            clearcoatRoughness: 0.1,
            iridescence: 0.41,
            iridescenceIOR: 1.5,
            
            // Layout Settings
            textSpacing: 0.10,      
            
            // Puffy Bevel Settings
            depthMultiplier: 0.2,   
            bevelMultiplier: 0.03,  
            bevelSegments: 10       
        };

        // --- Init ---
        const container = document.getElementById('canvas-container');
        const width = container.clientWidth;
        const height = container.clientHeight;

        const scene = new THREE.Scene();
        // NO BACKGROUND COLOR - Allows transparency
        
        const camera = new THREE.PerspectiveCamera(35, width / height, 0.1, 1000);
        camera.position.set(0, 0, 100);

        // Alpha: true is crucial for transparency
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(width, height);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 0.5; // Slightly brighter exposure for white bg
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        container.appendChild(renderer.domElement);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.09;
        controls.enableZoom = false; // Disable zoom to not mess up footer layout
        controls.enablePan = false;

        // Save the default camera position so we can return to it
        controls.saveState();

        // Intersection Observer: Resets rotation when user scrolls away
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                // If the footer is completely out of view
                if (!entry.isIntersecting) {
                    controls.reset(); // Snap camera back to original position
                }
            });
        });
        observer.observe(container);

        // --- Environment & Lighting ---
        // We still use a dark environment map for the REFLECTIONS (metal needs to reflect something),
        // but the actual background is transparent.
        const pmremGenerator = new THREE.PMREMGenerator(renderer);
        pmremGenerator.compileEquirectangularShader();
        const envScene = new THREE.Scene();
        envScene.background = new THREE.Color(0x222222); // Dark grey env for contrast
        
        // Studio reflection panels
        const box1 = new THREE.Mesh(new THREE.BoxGeometry(50, 2, 50), new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.BackSide }));
        box1.position.y = 10;
        envScene.add(box1);
        const box2 = new THREE.Mesh(new THREE.BoxGeometry(20, 20, 2), new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.BackSide }));
        box2.position.set(20, 0, 20);
        box2.lookAt(0,0,0);
        envScene.add(box2);
        const box3 = new THREE.Mesh(new THREE.BoxGeometry(20, 20, 2), new THREE.MeshBasicMaterial({ color: 0xccccff, side: THREE.BackSide }));
        box3.position.set(-20, 0, -10);
        box3.lookAt(0,0,0);
        envScene.add(box3);

        scene.environment = pmremGenerator.fromScene(envScene).texture;
        
        RectAreaLightUniformsLib.init();
        // Increased dimensions to 50x50 for a much softer, larger light source
        const rectLight = new THREE.RectAreaLight(0xffffff, 15, 50, 75);
        rectLight.position.set(5, 5, 25);
        rectLight.lookAt(5, -10, 10);
        scene.add(rectLight);

        const spotLight = new THREE.SpotLight(0xffffff, 800);
        spotLight.position.set(-10, 20, 20);
        spotLight.castShadow = true;
        
        // Diffusion Settings
        spotLight.angle = 1;    // Wider beam
        spotLight.penumbra = 2.0; // Max softness at edges
        spotLight.shadow.radius = 20; // Blurs the shadow map
        spotLight.shadow.bias = -0.0001;
        
        scene.add(spotLight);

        // --- NEW: Back Spotlight ---
        // Ensures the logo looks just as good when rotated 180 degrees
        const backSpotLight = new THREE.SpotLight(0xffffff, 800);
        backSpotLight.position.set(15, 20, -10); // Mirror of the front light, but behind
        backSpotLight.castShadow = true;
        
        // Match diffusion settings
        backSpotLight.angle = 1;
        backSpotLight.penumbra = 2.0;
        backSpotLight.shadow.radius = 20;
        backSpotLight.shadow.bias = -0.0001;
        
        scene.add(backSpotLight);
        
        const rimLight = new THREE.SpotLight(0x4a9c2d, 1500); 
        rimLight.position.set(-10, -30, -10);
        rimLight.lookAt(0,0,0);
        scene.add(rimLight);

        // --- Material ---
        const material = new THREE.MeshPhysicalMaterial({
            color: config.colorHex,
            emissive: config.emissive,
            metalness: config.metalness,
            roughness: config.roughness,
            clearcoat: config.clearcoat,
            clearcoatRoughness: config.clearcoatRoughness,
            iridescence: config.iridescence,
            iridescenceIOR: config.iridescenceIOR,
        });

        const logoGroup = new THREE.Group();
        scene.add(logoGroup);

        // Variables for dynamic scaling
        let wrapperGroup = null;
        let originalSvgWidth = 1; // Default to 1 to avoid divide by zero

        // --- Scale Logic Function ---
        function fitLogoToScreen() {
            if (!wrapperGroup || originalSvgWidth === 0) return;

            // 1. Calculate the visible width of the scene at depth 0 (where logo is)
            const dist = camera.position.z - 0; // distance from camera to object
            const vFOV = THREE.MathUtils.degToRad(camera.fov); // vertical Field of View in radians
            const visibleHeight = 2 * Math.tan(vFOV / 2) * dist;
            const visibleWidth = visibleHeight * camera.aspect;

            // 2. We want the logo to take up X% of the visible width (e.g., 85%)
            const targetWidth = visibleWidth * 0.80; 

            // 3. Calculate Scale Factor
            // scale = target / original
            const scaleFactor = targetWidth / originalSvgWidth;

            // 4. Apply
            wrapperGroup.scale.set(scaleFactor, -scaleFactor, scaleFactor); // Keep Y negative for SVG flip
        }

        // --- SVG Processing ---
        const svgString = `<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="512.000000" height="333.000000" viewBox="0 0 512.000000 333.000000" preserveAspectRatio="xMidYMid meet" class="ai-style-change-1"><g transform="translate(0.000000,333.000000) scale(0.100000,-0.100000)" fill="#111111" stroke="none"><path d="M1315 2603 c-393 -56 -739 -363 -836 -741 -138 -541 169 -1070 712 -1229 94 -27 94 -27 1334 -31 1453 -4 1393 -8 1622 105 761 375 728 1480 -54 1822 -186 81 -72 75 -1488 77 -693 1 -1273 -1 -1290 -3z m2587 -83 c183 -40 340 -131 479 -278 452 -476 278 -1259 -335 -1508 -167 -68 -104 -65 -1506 -62 -1436 4 -1305 -4 -1507 95 -455 224 -648 772 -433 1231 122 260 366 458 645 522 127 29 2525 29 2657 0z" fill="#fff"/><path d="M1789 1903 c-102 -52 -113 -82 -117 -296 -4 -202 1 -233 50 -291 110 -133 322 -88 379 81 l16 48 6 -41 c14 -88 114 -164 217 -163 112 0 189 68 213 189 l14 65 6 -53 c22 -184 228 -268 364 -149 68 60 73 81 73 365 l0 252 -165 0 -165 0 0 -70 0 -70 96 0 95 0 -3 -176 c-3 -171 -4 -176 -27 -195 -30 -25 -62 -24 -94 1 -25 20 -26 25 -29 138 l-3 117 -72 3 c-68 3 -72 2 -76 -20 -2 -13 -5 43 -6 125 l-1 147 -165 0 -165 0 -1 -35 c0 -19 -1 -50 -2 -67 -1 -33 -1 -33 89 -38 l89 -5 3 -172 c2 -171 2 -171 -24 -192 -35 -28 -69 -27 -99 4 -24 23 -25 30 -25 140 l0 115 -75 0 -75 0 0 48 c0 168 -170 271 -321 195z m156 -144 c24 -23 35 -255 16 -320 -20 -65 -106 -77 -136 -18 -16 29 -22 268 -8 318 12 48 87 59 128 20z" fill="#fff"/><path d="M3500 1917 c-45 -15 -119 -88 -126 -127 -4 -16 -9 -30 -13 -30 -3 0 -6 -81 -6 -179 0 -99 3 -177 6 -175 4 2 9 -9 12 -24 3 -15 20 -44 38 -66 105 -125 311 -92 376 61 24 59 18 374 -9 432 -44 97 -165 144 -278 108z m127 -145 c31 -20 49 -279 23 -347 -20 -53 -108 -57 -135 -5 -32 63 -18 328 19 352 14 10 78 10 93 0z" fill="#fff"/><path d="M1340 1585 l0 -325 155 0 c85 0 158 -1 163 -2 4 -2 8 30 10 70 l3 72 -91 0 c-49 0 -89 3 -89 8 1 4 1 118 0 255 l-1 247 -75 0 -75 0 0 -325z" fill="#fff"/><path d="M3200 1585 l0 -325 70 0 70 0 0 325 0 325 -70 0 -70 0 0 -325z" fill="#fff"/><path d="M3030 1330 l0 -70 75 0 75 0 0 70 0 70 -75 0 -75 0 0 -70z" fill="#fff"/></g></svg>`;

        const loader = new SVGLoader();
        const svgData = loader.parse(svgString);

        const shapesGroup = new THREE.Group();
        const allMeshes = [];
        const shapes = [];
        svgData.paths.forEach((path) => {
            const pathShapes = SVGLoader.createShapes(path);
            shapes.push(...pathShapes);
        });

        // Calculate Bounds
        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;
        shapes.forEach(shape => {
            const points = shape.getPoints();
            points.forEach(p => {
                if(p.x < minX) minX = p.x;
                if(p.x > maxX) maxX = p.x;
                if(p.y < minY) minY = p.y;
                if(p.y > maxY) maxY = p.y;
            });
        });
        originalSvgWidth = maxX - minX;
        const svgH = maxY - minY;
        
        const extrudeSettings = {
            steps: 2,
            depth: svgH * config.depthMultiplier, 
            bevelEnabled: true,
            bevelThickness: svgH * config.bevelMultiplier,
            bevelSize: svgH * config.bevelMultiplier,
            bevelSegments: config.bevelSegments
        };

        // Create Meshes
        shapes.forEach((shape) => {
            const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
            geometry.computeBoundingBox();
            const mesh = new THREE.Mesh(geometry, material);
            mesh.castShadow = true;
            mesh.receiveShadow = true;
            shapesGroup.add(mesh);
            allMeshes.push(mesh);
        });

        // Apply Spacing Logic
        let borderMesh = null;
        let maxArea = 0;
        
        allMeshes.forEach(mesh => {
            const box = mesh.geometry.boundingBox;
            const w = box.max.x - box.min.x;
            const h = box.max.y - box.min.y;
            const area = w * h;
            if (area > maxArea) {
                maxArea = area;
                borderMesh = mesh;
            }
        });
        
        const textMeshes = allMeshes.filter(m => m !== borderMesh);
        if (textMeshes.length > 0 && config.textSpacing > 0) {
            let tMin = Infinity;
            let tMax = -Infinity;
            textMeshes.forEach(m => {
                 const box = m.geometry.boundingBox;
                 if (box.min.x < tMin) tMin = box.min.x;
                 if (box.max.x > tMax) tMax = box.max.x;
            });
            const textCenterX = (tMin + tMax) / 2;
            
            textMeshes.forEach(m => {
                const box = m.geometry.boundingBox;
                const meshCenterX = (box.min.x + box.max.x) / 2;
                const dist = meshCenterX - textCenterX;
                m.position.x += dist * config.textSpacing;
            });
        }

        // Center and Flip
        const box = new THREE.Box3().setFromObject(shapesGroup);
        const center = box.getCenter(new THREE.Vector3());
        
        shapesGroup.position.x = -center.x;
        shapesGroup.position.y = -center.y;
        shapesGroup.position.z = -center.z;

        wrapperGroup = new THREE.Group();
        wrapperGroup.add(shapesGroup);
        
        // Initial Fit
        fitLogoToScreen();

        logoGroup.add(wrapperGroup);
        
        document.getElementById('loading').remove();

        // --- Animation ---
        const clock = new THREE.Clock();
        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();
            
            // Floating
            logoGroup.position.y = Math.sin(time * 0.5) * 0.15;
            
            // Gentle continuous rotation (Increased amplitude from 0.05 to 0.2 for more "degrees")
            logoGroup.rotation.y = Math.sin(time * 0.3) * 0.15;

            controls.update();
            renderer.render(scene, camera);
        }

        // Handle Resizing
        window.addEventListener('resize', () => {
            const w = container.clientWidth;
            const h = container.clientHeight;
            
            camera.aspect = w / h;
            camera.updateProjectionMatrix();
            renderer.setSize(w, h);
            
            // Re-calculate scale to fit new width
            fitLogoToScreen();
        });

        animate();

    </script>
</body>
</html>